<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>DuckStudy</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #fefefe;
      color: #222;
    }
    h1 { color: #2b6cb0; }
    select, textarea, input, button {
      font-size: 1em;
      padding: 6px;
      margin: 6px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #3182ce;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover { background-color: #2c5282; }
    textarea { width: 100%; max-width: 400px; }
    #output { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Welkom bij DuckStudy!!</h1>

  <label for="modus">üéØ Kies modus:</label>
  <select id="modus">
    <option value="lijst">üìã Lijst</option>
    <option value="flashcards">üÉè Flashcards</option>
  </select>

  <h2>üì• Voer je woordenlijst in:</h2>
  <textarea id="lijst" rows="6" placeholder="bijv. hond,chien&#10;kat,chat"></textarea><br>
  <button onclick="startModus()">Start</button>

  <h3>üíæ Lijst opslaan</h3>
  <input type="text" id="lijstNaam" placeholder="Naam van de lijst">
  <button onclick="slaLijstOp()">Opslaan</button>

  <h3>üìÇ Lijstenarchief</h3>
  <select id="archiefDropdown" onchange="laadLijst()">
    <option disabled selected>Kies een opgeslagen lijst</option>
  </select>

  <div id="output"></div>

  <script>
    let kaarten = [];
    let index = 0;
    let antwoordZichtbaar = false;

    function startModus() {
      const modus = document.getElementById("modus").value;
      const invoer = document.getElementById("lijst").value;
      const regels = invoer.split("\n");

      kaarten = regels.map(r => {
        const delen = r.split(",");
        return { vraag: delen[0]?.trim(), antwoord: delen[1]?.trim() };
      }).filter(k => k.vraag && k.antwoord);

      index = 0;
      antwoordZichtbaar = false;

      if (modus === "lijst") {
        toonLijst();
      } else if (modus === "flashcards") {
        toonKaart();
      }
    }

    function toonLijst() {
      const output = kaarten.map(k => `<li>${k.vraag} ‚Üí ${k.antwoord}</li>`).join('');
      document.getElementById("output").innerHTML = `<ul>${output}</ul>`;
    }

    function toonKaart() {
      if (kaarten.length === 0) {
        document.getElementById("output").innerHTML = "<p>Geen kaarten beschikbaar.</p>";
        return;
      }

      const kaart = kaarten[index];
      const inhoud = antwoordZichtbaar
        ? `<strong>Antwoord:</strong> ${kaart.antwoord}`
        : `<strong>Vraag:</strong> ${kaart.vraag}`;

      document.getElementById("output").innerHTML = `
        <p>${inhoud}</p>
        <button onclick="wissel()">Toon ${antwoordZichtbaar ? 'vraag' : 'antwoord'}</button>
        <button onclick="volgendeKaart()">Volgende</button>
      `;
    }

    function wissel() {
      antwoordZichtbaar = !antwoordZichtbaar;
      toonKaart();
    }

    function volgendeKaart() {
      index = (index + 1) % kaarten.length;
      antwoordZichtbaar = false;
      toonKaart();
    }

    function slaLijstOp() {
      const naam = document.getElementById("lijstNaam").value.trim();
      const inhoud = document.getElementById("lijst").value;
      if (!naam || !inhoud) {
        alert("Vul zowel een naam als een lijst in.");
        return;
      }
      localStorage.setItem("lijst_" + naam, inhoud);
      updateArchiefDropdown();
      alert("Lijst opgeslagen!");
    }

    function laadLijst() {
      const naam = document.getElementById("archiefDropdown").value;
      const inhoud = localStorage.getItem("lijst_" + naam);
      document.getElementById("lijst").value = inhoud;
    }

    function updateArchiefDropdown() {
      const dropdown = document.getElementById("archiefDropdown");
      dropdown.innerHTML = '<option disabled selected>Kies een opgeslagen lijst</option>';
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith("lijst_")) {
          const naam = key.replace("lijst_", "");
          const optie = document.createElement("option");
          optie.value = naam;
          optie.textContent = naam;
          dropdown.appendChild(optie);
        }
      }
    }

    window.onload = updateArchiefDropdown;
  </script>
</body>
</html>
