<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>DuckStudy</title>
</head>
<body>
  <h1>Welkom bij DuckStudy!</h1>

  <!-- Modus kiezen -->
  <label for="modus">Kies modus: </label>
  <select id="modus" onchange="kiesModus()">
    <option value="lijst">üìã Lijst</option>
    <option value="toets">üìù Toets</option>
  </select>

  <!-- Invoer -->
  <h2>Voer je woordenlijst in:</h2>
  <textarea id="lijst" rows="6" cols="30" placeholder="bijv. hond,dog"></textarea><br><br>
  <button onclick="kiesModus()">Start</button>

  <!-- Opslaan -->
  <h3>Lijst opslaan</h3>
  <input type="text" id="lijstNaam" placeholder="Lijstnaam">
  <button onclick="opslaan()">üíæ Opslaan</button>

  <!-- Archief -->
  <h3>üìÇ Lijstenarchief</h3>
  <select id="archief" onchange="laden()"></select>

  <!-- Resultaat -->
  <h3>Jouw lijst:</h3>
  <div id="output"></div>

  <script>
    // Opslaan in localStorage
    function opslaan() {
      const naam = document.getElementById("lijstNaam").value;
      const inhoud = document.getElementById("lijst").value;
      if (naam && inhoud) {
        localStorage.setItem("lijst_" + naam, inhoud);
        updateArchief();
        alert("Lijst opgeslagen!");
      }
    }

    // Lijsten dropdown bijwerken
    function updateArchief() {
      const select = document.getElementById("archief");
      select.innerHTML = "";
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith("lijst_")) {
          const naam = key.replace("lijst_", "");
          const option = document.createElement("option");
          option.value = naam;
          option.textContent = naam;
          select.appendChild(option);
        }
      }
    }

    // Laden van lijst
    function laden() {
      const naam = document.getElementById("archief").value;
      const data = localStorage.getItem("lijst_" + naam);
      document.getElementById("lijst").value = data;
    }

    // Lijstmodus en toetsmodus kiezen
    function kiesModus() {
      const modus = document.getElementById("modus").value;
      const invoer = document.getElementById("lijst").value;
      const regels = invoer.split("\n");
      const lijst = regels.map(r => r.split(",").map(s => s.trim())).filter(p => p.length === 2);

      if (modus === "lijst") {
        document.getElementById("output").innerHTML = "<ul>" + lijst.map(item => `<li>${item[0]} ‚Üí ${item[1]}</li>`).join("") + "</ul>";
      } else if (modus === "toets") {
        startToetsmodus(lijst);
      }
    }

    // Toetsmodus functie
    function startToetsmodus(lijst) {
      let index = 0;
      let score = 0;
      const output = document.getElementById("output");

      function toonVraag() {
        if (index >= lijst.length) {
          output.innerHTML = `<h3>Klaar!</h3><p>Je score: ${score}/${lijst.length}</p>`;
          return;
        }

        const vraag = lijst[index][0];
        output.innerHTML = `
          <p><strong>Wat is het Engels voor: <em>${vraag}</em>?</strong></p>
          <input type="text" id="antwoordInput" placeholder="Typ je antwoord">
          <button onclick="controleerAntwoord()">Controleer</button>
        `;
      }

      window.controleerAntwoord = function () {
        const antwoord = document.getElementById("antwoordInput").value.trim().toLowerCase();
        const juist = lijst[index][1].toLowerCase();

        if (antwoord === juist) {
          score++;
          alert("‚úÖ Goed!");
        } else {
          alert(`‚ùå Fout. Het juiste antwoord was: ${juist}`);
        }

        index++;
        toonVraag();
      };

      toonVraag();
    }

    // Bij opstart archief vullen
    updateArchief();
  </script>
</body>
</html>
